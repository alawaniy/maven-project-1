pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                bat 'mvn clean package checkstyle:checkstyle'
            }
			post {
			  success {
			     echo 'Now Archiving...'
				 archiveArtifacts artifacts: '**/target/*.war'
				 checkstyle canComputeNew: false, defaultEncoding: '', healthy: '', pattern: '', unHealthy: ''
				 build 'deploy-to-staging'
                      }
			      }
            }
                   }
}